<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
	<script type="text/javascript">
		//第一遍同步执行，这是一个宏任务，调用了三次setTimeout(Promise中的代码也是同步执行的)，调用了一次resolve
		//三个宏任务 一个微任务
		//首先显示必然是sync1 promise sync2 这时setTimeout1,setTimeoutPromise,last_setTimeout在宏任务队列中，pro_then在微任务队列中
		//接下来，因为微任务不为空，第一个宏任务没有结束，集序执行微任务队列，所以pro_then被显示，然后又调用了一次setTimeout,所以pro_timeout进入宏任务队列，成为第五个宏任务
		//然后没有微任务了，执行第二个宏任务，所以接下来依次执行setTimeout1，setTimeoutPromise，pro_timeout，last_setTimeout
		console.log('sync1');

		setTimeout(function(){
			console.log('setTimeout1')
		},0);

		var promise = new Promise(function(resolve,reject){
			setTimeout(function(){
				console.log('setTimeoutPromise')
			},0);
			console.log('promise');
			resolve();
		});

		promise.then(()=>{
			console.log('pro_then');
			setTimeout(()=>{
				console.log('pro_timeout')
			},0)
		})

		setTimeout(function(){
			console.log('last_setTimeout')
		},0);
		console.log('sync2');

		// index.html:13 sync1
		// index.html:18 promise
		// index.html:32 sync2
		// index.html:23 pro_then
		// index.html:11 setTimeout1
		// index.html:16 setTimeoutPromise
		// index.html:30 last_setTimeout
		// index.html:25 pro_timeout
	</script>
</body>
</html>