<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="vue.js"></script>
</head>
<body>
        <div id="example">
            <yyx></yyx><!--使用模板-->
            <father></father>
        </div>
              
    <script>
        var yyycompent = {//子模板定义
          template: '<div class="sonyyx">{{ myMessage }}</div>',//props获得的数据使用
          props:['myMessage']//通过props向父组件声明期待获得的数据 约定：子使用父props用驼峰
        }
        var childcompent = {//子模板定义
          template: '<div class="childcompent">{{ myMessage }}的类型是{{ type }}</div>',
          props:['myMessage'],
          computed: {
            type(){
              return typeof this.myMessage
            }
          }
        }
        var yyxcompent = {//定义父模板
            template: `<h1 class="fatheryyx">hello sir<hr>
            <yyy myMessage = "LOL"></yyy>
            <yyy myMessage = "DNF"></yyy>
            <yyy v-bind:myMessage = "data1"></yyy>
            <yyy v-bind:myMessage = "data2"></yyy>
            <child v-bind:myMessage = "data3"></child>
            </h1>`,
            components:{//子模板声明
              'yyy': yyycompent,
              'child': childcompent
            },
            data(){//动态props传值
            //因为不使用return包裹的数据会在项目的全局可见，会造成变量污染 
            // 使用return包裹后数据中变量只在当前组件中生效，不会影响其他组件
              return {
                'data1': 'CF',
                'data2': 1,
                'data3': '666'
              }
            }
        }
        
        var childcompent1 = {//顺序执行  用子模板之前先定义好
          template: `<div class="child">
              <span>子组件数据</span>
              <input v-model= "temp"><br>
          </div>`,
          props: ['childMsg'],//子请求
                  //使用变量储存prop的初始值，
          data(){ //并使用watch来观察prop的值的变化。发生变化时，更新变量的值
            return{
              temp: this.childMsg
            }
          },
          watch:{
            childMsg(){
              this.temp = this.childMsg
            }
          }
        }
        
        var fathercompent = {//定义父组件
          template: `<div class='father'>
              <span>父组件数据</span>
              <input v-model= "msg"><br>
              <child v-bind:childMsg="msg"></child>
          </div>`,//使用绑定  
          components: {
            'child': childcompent1
          },
          data(){
            return {
              'msg': 'GOODLIKE'
            }
          }
        }
        // 创建根实例
        new Vue({
          el: '#example',
            components: {
            'yyx': yyxcompent,//声明模板
            'father': fathercompent//声明模板
          }  
        })
        </script>
        <style>
          div{
            font-size: 16px;
          }
        </style>
</body>
</html>